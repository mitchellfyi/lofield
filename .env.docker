# Lofield FM Docker Environment Configuration
# 
# This file contains all environment variables needed for running Lofield FM with Docker.
# Copy this file to .env and replace all placeholder values with your actual configuration.
#
# SECURITY WARNING: Never commit .env files with real credentials to version control!
#
# Generate secure passwords using:
#   openssl rand -base64 32

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================

# PostgreSQL user credentials
POSTGRES_USER=lofield
POSTGRES_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD
POSTGRES_DB=lofield_fm

# Database connection URL (used by services)
# This is automatically constructed in docker-compose.yml, but you can override if needed
# DATABASE_URL=postgresql://lofield:CHANGE_ME_TO_SECURE_PASSWORD@postgres:5432/lofield_fm?schema=public

# ============================================================================
# Icecast Streaming Server Configuration
# ============================================================================

# Password for sources (encoders) to connect and stream
# Used by the playout service to send audio to Icecast
ICECAST_SOURCE_PASSWORD=CHANGE_ME_TO_SECURE_SOURCE_PASSWORD

# Password for relay servers
ICECAST_RELAY_PASSWORD=CHANGE_ME_TO_SECURE_RELAY_PASSWORD

# Admin interface password for http://localhost:8000/admin/
ICECAST_ADMIN_PASSWORD=CHANGE_ME_TO_SECURE_ADMIN_PASSWORD

# Icecast hostname (internal docker network name)
ICECAST_HOSTNAME=icecast
ICECAST_HOST=icecast
ICECAST_PORT=8000
ICECAST_MOUNT_POINT=/lofield

# ============================================================================
# Web Application Configuration
# ============================================================================

# Public-facing URLs (adjust for your domain in production)
NEXT_PUBLIC_API_URL=http://localhost:3000
NEXT_PUBLIC_STREAM_URL=http://localhost:8000/live.mp3
NEXT_PUBLIC_ARCHIVE_BASE_URL=http://localhost:8000/archive

# Node environment (development or production)
NODE_ENV=production

# ============================================================================
# AI Services Configuration
# ============================================================================

# OpenAI API Key (REQUIRED)
# Used for script generation, classification, moderation, and TTS
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Replicate API Token (REQUIRED for music generation)
# Used for music generation with MusicGen
# Get your token from: https://replicate.com/account
REPLICATE_API_TOKEN=

# ElevenLabs API Key (OPTIONAL)
# Used for high-quality text-to-speech if configured
# Get your key from: https://elevenlabs.io
ELEVENLABS_API_KEY=

# Stability AI API Key (OPTIONAL)
# For alternative music generation
STABILITY_AI_API_KEY=

# ============================================================================
# Music Generation Configuration
# ============================================================================

# Music provider: "replicate" or "custom" (default: replicate)
MUSIC_PROVIDER=replicate

# Replicate model ID for MusicGen
MUSIC_MODEL=meta/musicgen:671ac645ce5e552cc63a54a2bbff63fcf798043055d2dac5fc9e36a837eedcfb

# Default track duration in seconds (default: 180)
MUSIC_DEFAULT_DURATION=180

# Enable music caching (default: true)
MUSIC_CACHE_ENABLED=true

# Music cache TTL in seconds (default: 86400 = 24 hours)
MUSIC_CACHE_TTL=86400

# ============================================================================
# Script Generation Configuration
# ============================================================================

# Script provider: "openai" or "anthropic" (default: openai)
SCRIPT_PROVIDER=openai

# OpenAI model for script generation (default: gpt-4o-mini)
SCRIPT_MODEL=gpt-4o-mini

# Temperature for script generation (0.0-2.0, default: 0.7)
SCRIPT_TEMPERATURE=0.7

# Maximum tokens for script generation (default: 1000)
SCRIPT_MAX_TOKENS=1000

# Enable script caching (default: true)
SCRIPT_CACHE_ENABLED=true

# Script cache TTL in seconds (default: 3600 = 1 hour)
SCRIPT_CACHE_TTL=3600

# ============================================================================
# Text-to-Speech Configuration
# ============================================================================

# TTS provider: "openai", "elevenlabs", or "google" (default: openai)
TTS_PROVIDER=openai

# OpenAI TTS model: "tts-1" (faster, cheaper) or "tts-1-hd" (higher quality)
# Only used when TTS_PROVIDER=openai (default: tts-1)
TTS_MODEL=tts-1

# Enable TTS caching (default: true)
TTS_CACHE_ENABLED=true

# TTS cache TTL in seconds (default: 86400 = 24 hours)
TTS_CACHE_TTL=86400

# ElevenLabs voice stability (0.0-1.0, default: 0.5)
TTS_STABILITY=0.5

# ElevenLabs similarity boost (0.0-1.0, default: 0.75)
TTS_SIMILARITY_BOOST=0.75

# ============================================================================
# Storage Configuration
# ============================================================================

# Path for storing generated audio files
# These paths are inside containers and map to Docker volumes
AUDIO_STORAGE_PATH=/var/lofield/audio
CACHE_DIR=/var/lofield/cache
STREAM_OUTPUT_PATH=/var/lofield/stream
ARCHIVE_OUTPUT_PATH=/var/lofield/archive

# ============================================================================
# Streaming/Playout Configuration
# ============================================================================

# HLS segment duration in seconds (default: 6)
HLS_SEGMENT_DURATION=6

# ============================================================================
# Retry Configuration
# ============================================================================

# Maximum retry attempts for failed API calls (default: 3)
RETRY_MAX_ATTEMPTS=3

# Base delay between retries in milliseconds (default: 1000)
RETRY_BASE_DELAY=1000

# Maximum delay between retries in milliseconds (default: 10000)
RETRY_MAX_DELAY=10000

# ============================================================================
# Scheduler Configuration
# ============================================================================

# Content buffer size in minutes (default: 45)
SCHEDULER_BUFFER_MINUTES=45

# Check interval in seconds (default: 60)
SCHEDULER_CHECK_INTERVAL=60

# ============================================================================
# Web API Configuration
# ============================================================================

# Enable/disable auto-moderation (default: true)
AUTO_MODERATION_ENABLED=true

# Maximum requests per IP per hour (default: 100)
RATE_LIMIT_PER_HOUR=100

# ============================================================================
# Production Notes
# ============================================================================
# 
# For production deployments:
# - Use strong, unique passwords for each service
# - Store credentials in a secure secrets management service (e.g., Docker Secrets, AWS Secrets Manager)
# - Never commit the .env file to version control
# - Rotate passwords regularly
# - Monitor API usage and costs in respective dashboards
# - Enable caching to reduce API costs
# - Use HTTPS/TLS with proper SSL certificates (configure in Nginx)
# - Set up proper backup strategies for PostgreSQL data
# - Configure log aggregation and monitoring
# - Review and adjust resource limits in docker-compose.yml
#
