# Lofield FM Environment Variables
# 
# SECURITY WARNING: Never commit this file with real credentials!
# Copy this file to .env and replace all placeholder values with secure credentials.
#
# Generate secure passwords using:
#   openssl rand -base64 32
# or your preferred password manager

# ============================================================================
# API Security Configuration
# ============================================================================

# Rate limiting - time window in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Rate limiting - maximum requests per window (default: 5)
# For development, you might want to set this higher (e.g., 100)
# For production, adjust based on expected traffic patterns
RATE_LIMIT_MAX=5

# CORS - comma-separated list of allowed origins
# For development, include localhost
# For production, include your production domain(s)
# Examples:
#   ALLOWED_ORIGINS=https://lofield.fm,https://www.lofield.fm
#   ALLOWED_ORIGINS=https://lofield.fm,https://lofield-preview.vercel.app,http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL superuser password
# Used by docker-compose.yml for the postgres service
POSTGRES_PASSWORD=CHANGE_ME_TO_SECURE_PASSWORD

# Database user and database name (can keep defaults or customize)
POSTGRES_USER=lofield
POSTGRES_DB=lofield_fm

# ============================================================================
# Icecast Streaming Server Configuration
# ============================================================================

# Password for sources (encoders) to connect and stream
# This is used by the playout service to send audio to Icecast
ICECAST_SOURCE_PASSWORD=CHANGE_ME_TO_SECURE_SOURCE_PASSWORD

# Password for relay servers to connect
# Only needed if you're running relay servers
ICECAST_RELAY_PASSWORD=CHANGE_ME_TO_SECURE_RELAY_PASSWORD

# Admin interface password
# Used to access the Icecast admin panel at http://localhost:8000/admin/
ICECAST_ADMIN_PASSWORD=CHANGE_ME_TO_SECURE_ADMIN_PASSWORD

# Icecast hostname (usually localhost for development)
ICECAST_HOSTNAME=localhost

# ============================================================================
# AI Services Configuration
# ============================================================================

# OpenAI API Key
# Used for script generation, classification, moderation, and as the fallback TTS provider
# Get your key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# ElevenLabs API Key
# Used for music generation and ElevenLabs TTS
# Get your key from: https://elevenlabs.io
ELEVENLABS_API_KEY=

# ============================================================================
# Music Generation Configuration
# ============================================================================

# Music provider: "elevenlabs" or "custom" (default: elevenlabs)
MUSIC_PROVIDER=elevenlabs

# ElevenLabs model ID for text-to-music generation
MUSIC_MODEL=music_v1

# Default track duration in seconds (default: 180)
MUSIC_DEFAULT_DURATION=180

# Enable music caching (default: true)
MUSIC_CACHE_ENABLED=true

# Music cache TTL in seconds (default: 86400 = 24 hours)
MUSIC_CACHE_TTL=86400

# ============================================================================
# Script Generation Configuration
# ============================================================================

# Script provider: "openai" or "anthropic" (default: openai)
SCRIPT_PROVIDER=openai

# OpenAI model for script generation (default: gpt-4o-mini)
SCRIPT_MODEL=gpt-4o-mini

# Temperature for script generation (0.0-2.0, default: 0.7)
SCRIPT_TEMPERATURE=0.7

# Maximum tokens for script generation (default: 1000)
SCRIPT_MAX_TOKENS=1000

# Enable script caching (default: true)
SCRIPT_CACHE_ENABLED=true

# Script cache TTL in seconds (default: 3600 = 1 hour)
SCRIPT_CACHE_TTL=3600

# ============================================================================
# Text-to-Speech Configuration
# ============================================================================

# TTS provider: "elevenlabs", "openai", or "google" (default: elevenlabs)
TTS_PROVIDER=elevenlabs

# ElevenLabs TTS model (default: eleven_multilingual_v2)
# If you switch to OpenAI, set this to "tts-1" or "tts-1-hd"
TTS_MODEL=eleven_multilingual_v2

# Default voice ID (optional)
TTS_DEFAULT_VOICE=

# Enable TTS caching (default: true)
TTS_CACHE_ENABLED=true

# TTS cache TTL in seconds (default: 86400 = 24 hours)
TTS_CACHE_TTL=86400

# ElevenLabs voice stability (0.0-1.0, default: 0.5)
TTS_STABILITY=0.5

# ElevenLabs similarity boost (0.0-1.0, default: 0.75)
TTS_SIMILARITY_BOOST=0.75

# ============================================================================
# Storage Configuration
# ============================================================================

# Path for storing generated audio files (default: /tmp/lofield/audio)
AUDIO_STORAGE_PATH=/tmp/lofield/audio

# Path for cache files (default: /tmp/lofield/cache)
CACHE_DIR=/tmp/lofield/cache

# ============================================================================
# Retry Configuration
# ============================================================================

# Maximum retry attempts for failed API calls (default: 3)
RETRY_MAX_ATTEMPTS=3

# Base delay between retries in milliseconds (default: 1000)
RETRY_BASE_DELAY=1000

# Maximum delay between retries in milliseconds (default: 10000)
RETRY_MAX_DELAY=10000

# ============================================================================
# Scheduler Configuration
# ============================================================================

# Content buffer size in minutes (default: 45)
SCHEDULER_BUFFER_MINUTES=45

# Check interval in seconds (default: 60)
SCHEDULER_CHECK_INTERVAL=60

# ============================================================================
# Notes
# ============================================================================
# 
# For development, you can use simple passwords, but for production:
# - Use strong, unique passwords for each service
# - Store credentials in a secure password manager
# - Never commit the .env file to version control
# - Consider using Docker secrets or a secrets management service
# - Rotate passwords regularly
#
# AI Services:
# - OpenAI is required for scripts + fallback TTS
# - ElevenLabs is required for music generation (and premium TTS)
# - Monitor usage and costs in respective dashboards
# - Enable caching to reduce API costs
